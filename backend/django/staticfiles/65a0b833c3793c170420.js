(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{450:function(t,e,o){"use strict";o.r(e);o(29);var n={data:function(){return{fields:[{key:"name",label:"Branch"},"abbreviation","departments","action"],items:[],new:!0,form:{country:{},city:{},branch:"",id:null,abbreviation:"",departments:[]},options:{countries:{options:[{value:null,text:"Select a Country"}]},cities:{options:[{value:null,text:"Select a City"}]},departments:{options:[{value:null,text:"Select some Department(s)"}]}}}},methods:{onCountryUpdate:function(){var t=this;this.options.cities.options=[{value:null,text:"Select a City"}],this.$axios.$get("accounts/cities?country="+this.form.country,{headers:this.$store.getters.authHeader}).then((function(e){e.forEach((function(e){t.options.cities.options.push({value:e.id,text:e.name})}))})).catch((function(t){return console.log(t)}))},showOModal:function(t,data){var e=this;this.new=data.new,this.form.departments=[],data.new?(this.form.country="",this.form.city="",this.form.branch="",this.form.abbreviation=""):(this.form.country=data.item.country,this.form.city=data.item.city,this.form.branch=data.item.name,this.form.abbreviation=data.item.abbreviation,this.form.id=data.item.id,this.onCountryUpdate(),data.item.departments.forEach((function(t){e.form.departments.push(t.id)}))),this.$refs.officeModal.show()},handleOk:function(){this.handleSubmit()},handleSubmit:function(){var t=this;(this.new?this.$axios.$post:this.$axios.$put)("accounts/office-settings/",this.form,{headers:this.$store.getters.authHeader}).then((function(e){t.items=e})).catch((function(t){return console.log(t)}))},deleteOffice:function(t,data){var e=this;this.$axios.delete("accounts/office-settings/"+data.item.id+"/",{headers:this.$store.getters.authHeader}).then((function(t){e.items=t.data})).catch((function(t){return console.log(t)}))}},mounted:function(){var t=this;this.$axios.get("accounts/office-settings/",{headers:this.$store.getters.authHeader}).then((function(e){t.items=e.data})).catch((function(t){return console.log(t)})),this.options.countries.options=[{value:null,text:"Select a Country"}],this.$axios.get("accounts/country-settings/",{headers:this.$store.getters.authHeader}).then((function(e){e.data.forEach((function(e){t.options.countries.options.push({value:e.id,text:e.name})}))})).catch((function(t){return console.log(t)})),this.options.departments.options=[{value:null,text:"Select some Office(s)"}],this.$axios.get("accounts/department-settings/",{headers:this.$store.getters.authHeader}).then((function(e){e.data.forEach((function(e){t.options.departments.options.push({value:e.id,text:e.name})}))})).catch((function(t){return console.log(t)}))}},r=o(28),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("h4",[t._v("Branches "),o("b-button",{staticClass:"ml-5",attrs:{variant:"info",size:"sm"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showOModal(e,{new:!0})}}},[t._v("+ Branch")])],1),t._v(" "),o("hr"),t._v(" "),o("b-table",{attrs:{striped:"",hover:"",items:t.items,fields:t.fields},scopedSlots:t._u([{key:"cell(departments)",fn:function(data){return t._l(data.item.departments,(function(e){return o("span",{key:e.id},[t._v(" "+t._s(e.name)+",")])}))}},{key:"cell(action)",fn:function(data){return[o("a",{attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showOModal(e,{new:!1,item:data.item})}}},[o("font-awesome-icon",{attrs:{icon:"edit"}})],1),t._v(" | \n            "),o("a",{attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.deleteOffice(e,{item:data.item})}}},[o("font-awesome-icon",{attrs:{icon:"times"}})],1)]}}])}),t._v(" "),o("b-modal",{ref:"officeModal",attrs:{title:"Branch/Office",size:"lg",centered:""},on:{ok:t.handleOk}},[o("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[o("b-row",[o("b-col",[o("b-form-group",{attrs:{id:"fieldset-horizontal","label-cols-sm":"3","label-cols-lg":"2","label-size":"sm",description:"Country Name",label:"Country","label-for":"country","invalid-feedback":"title is required"}},[o("b-form-select",{ref:"category",attrs:{id:"categories",options:t.options.countries.options,size:"sm"},on:{change:t.onCountryUpdate},model:{value:t.form.country,callback:function(e){t.$set(t.form,"country",e)},expression:"form.country"}})],1)],1),t._v(" "),o("b-col",[o("b-form-group",{attrs:{id:"fieldset-horizontal","label-cols-sm":"3","label-cols-lg":"2","label-size":"sm",description:"City Name",label:"city","label-for":"city","invalid-feedback":"title is required"}},[o("b-form-select",{ref:"city",attrs:{id:"city",options:t.options.cities.options,size:"sm"},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}})],1)],1)],1),t._v(" "),o("b-row",[o("b-col",[o("b-form-group",{attrs:{id:"fieldset-horizontal","label-cols-sm":"3","label-cols-lg":"2","label-size":"sm",description:"Branch Name",label:"Branch","label-for":"branch","invalid-feedback":"title is required"}},[o("b-form-input",{attrs:{type:"text",id:"city",required:""},model:{value:t.form.branch,callback:function(e){t.$set(t.form,"branch",e)},expression:"form.branch"}})],1)],1),t._v(" "),o("b-col",[o("b-form-group",{attrs:{id:"fieldset-horizontal","label-cols-sm":"3","label-cols-lg":"2","label-size":"sm",description:"branch Abbreviation",label:"Abbr","label-for":"abbreviation","invalid-feedback":"title is required"}},[o("b-form-input",{attrs:{type:"text",id:"abbreviation",required:""},model:{value:t.form.abbreviation,callback:function(e){t.$set(t.form,"abbreviation",e)},expression:"form.abbreviation"}})],1)],1)],1),t._v(" "),o("b-row",[o("b-col",[o("b-form-group",{attrs:{id:"fieldset-horizontal","label-cols-sm":"3","label-cols-lg":"2","label-size":"sm",description:"Branches/Offices",label:"Branches","label-for":"office","invalid-feedback":"title is required"}},[o("b-form-select",{ref:"office",attrs:{id:"office",options:t.options.departments.options,size:"sm",multiple:"","select-size":t.options.departments.options.length},model:{value:t.form.departments,callback:function(e){t.$set(t.form,"departments",e)},expression:"form.departments"}})],1)],1)],1),t._v(" "),t._t("default")],2)],1)],1)}),[],!1,null,null,null);e.default=component.exports}}]);